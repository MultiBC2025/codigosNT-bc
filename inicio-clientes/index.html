<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Panel - MultiEntretenimiento BC</title>
    <link rel="icon" href="https://lh3.googleusercontent.com/p/AF1QipOZvd1JR-k6gN7h0uOdniak86-oMb2Es8vDMaoA=s1360-w1360-h1020-rw" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        /* VARIABLES DE COLOR PARA MODO CLARO/OSCURO */
        :root {
            --bg-body: #f4f6f8;
            --bg-card: #ffffff;
            --text-main: #1e1e2f;
            --text-muted: #6c757d;
            --info-row-bg: #f8f9fa;
            --border-color: #dee2e6;
        }

        [data-theme="dark"] {
            --bg-body: #121212;
            --bg-card: #1e1e1e;
            --text-main: #f4f6f8;
            --text-muted: #b0b0b0;
            --info-row-bg: #2a2a2a;
            --border-color: #444;
        }
        
        .text-muted { color: var(--text-muted) !important; }
        .border-start { border-color: var(--border-color) !important; }

        body { background: var(--bg-body); font-family: 'Segoe UI', sans-serif; color: var(--text-main); transition: 0.3s; }
        .login-container { max-width: 450px; margin: 80px auto; padding: 20px; }
        .card-auth { border: none; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); padding: 30px; background: var(--bg-card); }
        .header-logo { font-weight: bold; color: var(--text-main); margin-bottom: 20px; font-size: 1.5rem; }
        
        .servicio-card { border: none; border-radius: 12px; margin-bottom: 15px; transition: 0.3s; border-left: 6px solid #ccc; background: var(--bg-card); color: var(--text-main); }
        .vencido { border-left-color: #dc3545; }
        .proximo { border-left-color: #ffc107; }
        .activo { border-left-color: #28a745; }
        
        .badge-status { font-size: 0.8rem; padding: 6px 12px; border-radius: 50px; font-weight: bold; }
        .info-row { background: var(--info-row-bg); border-radius: 8px; padding: 10px; margin-top: 10px; }
        .pin-box { background: #1e1e2f; color: white; padding: 2px 8px; border-radius: 4px; font-weight: bold; }
        h6.column-title { font-weight: bold; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 20px; margin-top: 10px; }
        
        .banner-largo { width: 100%; height: 100px; background: #2c3e50; border-radius: 10px; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; color: white; text-align: center; padding: 10px; }
        .mini-banner { width: 100%; height: 70px; background: var(--info-row-bg); border-radius: 8px; margin-top: 15px; display: flex; align-items: center; justify-content: center; color: var(--text-muted); border: 1px dashed #ccc; }

        .btn-autogestion { font-size: 0.7rem; padding: 3px 8px; border-radius: 5px; text-decoration: none; font-weight: bold; margin-left: 10px; border: 1px solid #0d6efd; color: #0d6efd; background: transparent; }
        .btn-autogestion:hover { background: #0d6efd; color: white; }

        .theme-toggle { position: fixed; top: 20px; right: 20px; z-index: 1000; background: var(--bg-card); border: 1px solid #ccc; border-radius: 50%; width: 45px; height: 45px; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: center; font-size: 1.2rem; transition: 0.3s; }

        .link-soporte { font-size: 0.85rem; display: block; margin-top: 15px; color: #0d6efd; text-decoration: none; }

        .oferta-renovacion { background: #fff3cd; border: 1px dashed #ffc107; border-radius: 8px; padding: 10px; margin-top: 10px; font-size: 0.85rem; color: #856404; text-align: center; }
        [data-theme="dark"] .oferta-renovacion { background: #332b00; border-color: #ffd700; color: #ffe082; }

        @media (max-width: 991px) { .order-mobile-1 { order: 1; } .order-mobile-2 { order: 2; } }
        
         .main-footer {
            opacity: 0; /* Invisible al principio */
            transition: opacity 0.5s ease; /* Aparecer√° suavemente */
            background-color: #ffffff !important; 
            color: #000000 !important;
            color-scheme: light;
            text-align: center;
            padding: 5px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            position: absolute; /* siempre al fondo */
            align-items: center;
            flex-wrap: wrap;
            margin: 40px auto 20px auto;
            margin-top: auto; /* Empuja el footer hacia abajo */
            border-top: 2px solid #333;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
            border-radius: 50px 50px 0 0;
            z-index: 100;
            width: 100%;
            position: relative; 
    /* 50px de espacio arriba | auto para centrar horizontalmente | 40px de espacio al final */
    margin: 50px auto  auto;
            
          left: 0;
        }

        .footer-text {
            color: #555;
            font-size: 5em;
        }
        
        .footer-visible {
    opacity: 1 !important; /* Clase que activaremos por JS */
}

    </style>
</head>
<body>
    
<div id="customModal" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 2000; display: none; align-items: center; justify-content: center; backdrop-filter: blur(5px);">
    <div style="background: var(--bg-card); color: var(--text-main); padding: 30px; border-radius: 15px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; position: relative;">
        <span onclick="cerrarModal()" style="position: absolute; top: 15px; right: 20px; font-size: 30px; cursor: pointer; color: var(--text-muted);">&times;</span>
        <div id="modalBody"></div>
        <div class="text-center mt-4">
            <button class="btn btn-primary" onclick="cerrarModal()">Cerrar</button>
        </div>
    </div>
</div>

<button class="theme-toggle" onclick="toggleTheme()" id="themeBtn">üåô</button>

<div id="app">
    <div id="sectionLogin" class="container login-container">
        <div class="card-auth text-center">
            <div class="header-logo">üöÄ MultiEntretenimiento BC</div>
            <h4 class="mb-3">Bienvenido a tu Panel</h4>
            <p class="text-muted mb-4">Ingresa tu n√∫mero de WhatsApp para ver tus servicios.</p>
            <div class="input-group mb-3">
                <select id="selectPais" class="form-select" style="max-width: 100px;">
                    <option value="57" selected>+57 üá®üá¥</option>
                    <option value="58">+58 üáªüá™</option>
                    <option value="51">+51 üáµüá™</option>
                    <option value="52">+52 üá≤üáΩ</option>
                    <option value="1">+1 üá∫üá∏</option>
                </select>
                <input type="tel" id="inputTel" class="form-control form-control-lg" placeholder="3001234567">
            </div>
            <button onclick="verificarAcceso()" id="btnAcceder" class="btn btn-primary btn-lg w-100 shadow-sm">Consultar Mis Servicios</button>
            
            <a href="https://wa.me/573503938788?text=Hola%20MultiEntretenimiento%20BC%2C%20tengo%20problemas%20para%20ingresar%20a%20mi%20panel." target="_blank" class="link-soporte">
                ¬øOlvidaste o tienes problemas para ingresar? <b>Clic aqu√≠</b>
            </a>

            <div class="header-logo mt-4" style="font-size: 1rem;">üöÄ Variedades y Entretenimiento BC <br> El mejor entretenimiento üçø para todos üì±</div>
        </div>
    </div>

    <div id="sectionPanel" class="container mt-4" style="display: none;">
        <div id="panelHeader"></div>
        <div id="listaServicios" class="row"></div>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
    const soporteData = {
        "NETFLIX": [
        // --- SECCI√ìN 1: EL HOGAR NETFLIX (EL M√ÅS IMPORTANTE) ---
        { q: "Aviso: 'Este televisor no forma parte de tu Hogar'", a: "Es el problema m√°s com√∫n. Debes usar el bot√≥n azul de **Autogesti√≥n** que aparece aqu√≠ en tu panel. All√≠ obtendr√°s el c√≥digo o el link de 'Estoy de viaje' al instante." },
        { q: "C√≥mo usar el bot√≥n de Autogesti√≥n", a: "Haz clic en 'Autogesti√≥n' al lado de tu cuenta de Netflix. Sigue los pasos del siguiente video tutorial https://youtu.be/08oOPR-dbks para validar tu TV sin esperar a soporte." },
        { q: "C√≥digo de hogar no llega al correo", a: "El sistema de autogesti√≥n de MultiEntretenimiento BC lo captura por ti. debes esperar de 2 a 5 minutos en que llegue el correo." },
        { q: "Netflix me pide actualizar el hogar cada pocos d√≠as", a: "Netflix ahora exige una verificaci√≥n del hogar para seguir usando el servicio. Esto es obligatorio por parte de Netflix, no de nosotros." },
        { q: "Mensaje: 'Alguien de tu hogar ha pedido un c√≥digo'", a: "Si no fuiste t√∫, otro miembro de la cuenta est√° validando su TV. No te preocupes, no afecta tu perfil." },
        { q: "Error al generar c√≥digo en autogesti√≥n", a: "Cierra la ventana, espera 10 segundos y vuelve a intentar. Aseg√∫rate de tener buena conexi√≥n a internet." },

        // --- SECCI√ìN 2: ACCESO Y CREDENCIALES ---
        { q: "Contrase√±a incorrecta", a: "Copia y pega la clave directamente desde este panel para evitar errores. Aseg√∫rate de no incluir espacios en blanco al inicio o al final." },
        { q: "No puedo cambiar la contrase√±a", a: "Seg√∫n nuestros TyC, est√° estrictamente prohibido cambiar la clave. Si lo intentas, el sistema bloquear√° tu acceso por seguridad." },
        { q: "El correo cambi√≥ y no puedo entrar", a: "Reporta de inmediato a nuestro WhatsApp de soporte. Nosotros realizamos las actualizaciones de seguridad." },
        { q: "Me pide un n√∫mero de tel√©fono al entrar", a: "Dale a 'Omitir' o 'Configurar despu√©s'. Nunca agregues tu n√∫mero personal a la cuenta." },
        { q: "Olvid√© mi PIN de perfil", a: "Tu PIN es fijo y est√° escrito aqu√≠ mismo en este panel, dentro de la caja oscura de datos de tu cuenta." },
        { q: "PIN de perfil no funciona", a: "Verifica que est√°s entrando al perfil correcto (el nombre asignado en tu panel). Si el PIN cambi√≥, av√≠sanos por WhatsApp." },

        // --- SECCI√ìN 3: ERRORES T√âCNICOS Y DE RED (TODOS LOS NW Y M√ÅS) ---
        { q: "Error NW-1-19", a: "Fallo de conectividad total. El dispositivo no detecta internet. Verifica el cable de red o la se√±al WiFi y reinicia el equipo." },
        { q: "Error NW-2-4", a: "Problema de conexi√≥n con los servidores de Netflix. Generalmente se soluciona reiniciando el m√≥dem de internet." },
        { q: "Error NW-2-5", a: "Uno de los m√°s comunes. Indica que el dispositivo no puede alcanzar los servidores de Netflix. Prueba la conexi√≥n en el men√∫ de ayuda de la app." },
        { q: "Error NW-3-6", a: "Problema de configuraci√≥n de red en el dispositivo. Si usas Smart TV, verifica que las DNS est√©n en autom√°tico." },
        { q: "Error NW-4-7", a: "Los datos almacenados en el dispositivo deben refrescarse. Cierra sesi√≥n, apaga el equipo y descon√©ctalo de la luz por 1 minuto." },
        { q: "Error NW-4-8", a: "Suele ocurrir en versiones antiguas de la app. Verifica en la tienda si hay una actualizaci√≥n pendiente para Netflix." },
        { q: "Error NW-6-403", a: "Error de servidor. Generalmente ocurre cuando la red est√° muy saturada. Intenta cerrar otras apps de streaming en tu casa." },
        { q: "Error NW-6-503", a: "El dispositivo no puede conectar por un fallo de cach√©. Debes ir a Configuraci√≥n del sistema > Aplicaciones > Netflix > Borrar datos." },
        { q: "Error UI-800-3 (Fallo de datos)", a: "Los datos de la app est√°n corruptos. Selecciona 'M√°s detalles' en el error y luego 'Restablecer' o 'Cerrar sesi√≥n'." },
        { q: "Error tvq-st-103", a: "El dispositivo no puede conectar porque la red est√° bloqueada. Si usas internet de una empresa o hotel, es posible que tengan bloqueado el streaming." },
        { q: "Error tvq-st-141 / 145", a: "Error de comunicaci√≥n. Intenta cambiar de red (por ejemplo, comparte datos desde tu celular) para descartar fallo del proveedor de internet." },
        { q: "Error tvq-pb-101", a: "Error de reproducci√≥n. Suele arreglarse simplemente retrocediendo al men√∫ principal e intentando reproducir el video de nuevo." },
        { q: "Error 1001 / 10023", a: "Ocurre en dispositivos m√≥viles. Indica que la app necesita ser reinstalada desde la Play Store o App Store." },
        { q: "Error M7111-1331-5059", a: "Netflix detect√≥ que est√°s usando un VPN o un 'Unblocker'. Desactiva cualquier extensi√≥n de este tipo en tu navegador." },
        { q: "Error AIP-701", a: "Falla de autenticaci√≥n de la cuenta. Cierra sesi√≥n completamente y vuelve a ingresar con el correo y clave que ves en este panel." },
        { q: "Error 5.2 o 5.7 en Android", a: "Tu dispositivo no cumple con los requisitos de seguridad de Google (Widevine). Netflix no funcionar√° en alta definici√≥n o no abrir√°." },
        { q: "Error de 'L√≠mite de t√≠tulos descargados'", a: "Netflix permite un m√°ximo de 100 descargas por dispositivo. Borra pel√≠culas ya vistas para poder descargar nuevas." },
        { q: "Error de 'Demasiados dispositivos de descarga'", a: "Ocurre cuando muchos perfiles han descargado contenido. Debes esperar a que otros borren sus descargas para que el sistema te permita bajar archivos." },
        { q: "La pantalla se queda en 25% o 99%", a: "Es un bloqueo de flujo de datos. Reinicia tu router y aseg√∫rate de que nadie est√© haciendo descargas pesadas en la misma red." },
        { q: "No aparece el bot√≥n de 'Pr√≥ximo episodio'", a: "Verifica en la configuraci√≥n de tu perfil (desde la web) que la opci√≥n de 'Reproducci√≥n autom√°tica' est√© activada." },

        // --- SECCI√ìN 4: PANTALLAS Y DISPOSITIVOS ---
        { q: "Mensaje: 'Demasiadas personas usando la cuenta'", a: "Respeta el l√≠mite de pantallas compradas. Si compraste 1 pantalla, aseg√∫rate de que no haya otro dispositivo tuyo usando la cuenta." },
        { q: "Netflix se cierra solo", a: "Verifica si tu dispositivo tiene actualizaciones pendientes o si el almacenamiento est√° muy lleno." },
        { q: "C√≥mo cerrar sesi√≥n en otros dispositivos", a: "Por seguridad de todos los clientes, esta opci√≥n solo la maneja el administrador de MultiEntretenimiento BC." },
        { q: "Puedo usar Netflix en mi celular y mi TV?", a: "Solo si adquiriste 2 pantallas. Si compraste 1, solo puedes ver en un dispositivo a la vez." },
        { q: "Se ve borroso o pixelado", a: "Netflix requiere al menos 5 Mbps para HD. Verifica tu velocidad en fast.com." },
        { q: "No escucho el audio pero veo la imagen", a: "Cambia el idioma del audio en el men√∫ de la pel√≠cula (por ejemplo, de 'Espa√±ol 5.1' a 'Espa√±ol' normal)." },

        // --- SECCI√ìN 5: CONFIGURACI√ìN Y PERFILES ---
        { q: "Puedo cambiar la foto de mi perfil?", a: "No. Seg√∫n los TyC, no debes modificar fotos, nombres ni crear nuevos perfiles para evitar desorden en la cuenta." },
        { q: "Aparecen perfiles nuevos o desconocidos", a: "Es normal en cuentas compartidas. Solo utiliza el perfil que te asignamos en este panel." },
        { q: "Mi lista de favoritos desapareci√≥", a: "Verifica que est√©s en tu perfil asignado. Si est√°s en el correcto, puede ser un error temporal de sincronizaci√≥n de Netflix." },
        { q: "C√≥mo cambiar el tama√±o de los subt√≠tulos", a: "Debes hacerlo desde la web de Netflix en 'Aspecto de subt√≠tulos'. No toques otros ajustes de cuenta." },
        { q: "Poner Netflix en espa√±ol", a: "Dentro del perfil, ve a Audio y Subt√≠tulos y elige Espa√±ol. Si el men√∫ est√° en ingl√©s, av√≠sanos para cambiarlo desde la ra√≠z." },
        { q: "Aparece 'Contenido no disponible en tu regi√≥n'", a: "Desactiva cualquier VPN o aplicaci√≥n que cambie tu ubicaci√≥n. Netflix solo funciona con IP local." },

        // --- SECCI√ìN 6: DISPOSITIVOS ESPEC√çFICOS ---
        { q: "Problemas en Smart TV antiguo", a: "Si la app no abre, intenta usar un TV Box, Chromecast o Fire Stick para actualizar la tecnolog√≠a de tu TV." },
        { q: "Netflix en PlayStation / Xbox no conecta", a: "Verifica que tu suscripci√≥n a PS Plus o Xbox Live no interfiera y que la fecha/hora de la consola sea exacta." },
        { q: "No puedo descargar pel√≠culas en mi PC", a: "La descarga solo est√° disponible en la app oficial de Netflix para Windows, no desde el navegador Chrome." },
        { q: "Error al descargar en celular (Muchos dispositivos)", a: "Netflix limita las descargas a ciertos dispositivos. Si no puedes descargar, es porque otro perfil ya llen√≥ el cupo de descargas." },
        { q: "Mi TV se queda en el logo de Netflix", a: "Elimina la app de Netflix y vuelve a instalarla. Si no puedes eliminarla, restablece los valores de f√°brica de la app." },

        // --- SECCI√ìN 7: FACTURACI√ìN Y GARANT√çA ---
        { q: "Mensaje: 'Tu cuenta est√° en pausa' o 'Problema de pago'", a: "No intentes pagar t√∫. Reporta esto de inmediato a nuestro WhatsApp para reactivar el servicio." },
        { q: "Cu√°nto dura mi garant√≠a?", a: "Tu garant√≠a dura exactamente el mismo tiempo que compraste de servicio. Puedes ver la fecha de fin en este panel." },
        { q: "Ped√≠ reembolso y no me lo dan", a: "Seg√∫n los TyC aceptados, al ser un producto digital no hay reembolsos, solo reposici√≥n del servicio bajo garant√≠a." },
        { q: "Mi cuenta vence hoy, ¬øpuedo pagar ma√±ana?", a: "Para evitar perder tu perfil y tus listas, te recomendamos renovar 24 horas antes del vencimiento." },
        { q: "Perd√≠ mi garant√≠a?", a: "La pierdes si cambias datos de la cuenta, compartes el acceso sin permiso o modificas perfiles ajenos." },

        // --- SECCI√ìN 8: OTROS ERRORES ---
        { q: "Netflix pide actualizaci√≥n de la app", a: "Ve a la tienda de aplicaciones (PlayStore/AppStore) y actualiza. Es obligatorio para que el sistema de autogesti√≥n funcione." },
        { q: "Aviso de 'Demasiadas descargas'", a: "Borra descargas de otros dispositivos antes de intentar bajar contenido nuevo." },
        { q: "No me aparecen los estrenos", a: "Cierra sesi√≥n y vuelve a entrar para que el cat√°logo se actualice con las novedades de tu pa√≠s." },
        { q: "Error de 'Sistema incompatible'", a: "Ocurre en celulares con Root o modificaciones de sistema. Netflix requiere sistemas originales." },
        { q: "Diferencia entre Plan B√°sico y Premium", a: "Nuestras cuentas suelen ser Premium 4K. Si notas baja calidad, verifica tu plan contratado con nosotros." },
        { q: "Me sale publicidad en Netflix", a: "Netflix ha lanzado planes con anuncios. Si compraste un plan sin anuncios y te salen, av√≠sanos para verificar tu cuenta." },
        { q: "El video se detiene a cada rato", a: "Haz una prueba de velocidad. Si tienes menos de 10 megas estables, el video sufrir√° cortes." },
        { q: "C√≥mo reportar una ca√≠da r√°pido", a: "Toma captura del error, anota el correo de la cuenta y env√≠alo a nuestro WhatsApp de soporte t√©cnico." },
        { q: "Por qu√© debo usar el panel para ver mis datos?", a: "Porque aqu√≠ siempre est√°n actualizados. Si cambiamos la clave por seguridad, la ver√°s aqu√≠ al instante sin esperar mensajes." },
        { q: "El bot√≥n de renovar no funciona", a: "Si el bot√≥n de WhatsApp no abre, guarda nuestro n√∫mero +57 350 3938788 y escr√≠benos directamente con tu nombre." }
    ],
        "DISNEY": [
    // --- SECCI√ìN CANALES DEPORTIVOS (MOSHRETV) ---
    { 
        q: "‚öΩ ¬øPor qu√© no puedo ver todos los canales de ESPN?", 
        a: "Disney+ incluye contenido bajo demanda y eventos seleccionados (ESPN 3). Los canales 1, 2, 4 y Premium son de TV lineal. **Para ver TODO el deporte en vivo, adquiere MosherTV** con nosotros. ¬°Pide informaci√≥n al WhatsApp!" 
    },
    { 
        q: "üèÄ ¬øPor qu√© no aparece el partido que quiero ver?", 
        a: "Muchos eventos son exclusivos de se√±ales premium. En **MosherTV** tenemos se√±ales 24/7 de todos los canales deportivos. Consulta precios en soporte." 
    },

    // --- C√ìDIGOS DE ERROR OFICIALES (BASE DE DATOS REAL) ---
    { q: "C√≥digo de error 4", a: "Problema con los datos de suscripci√≥n. Reporta este error a nuestro WhatsApp para verificar el estado de la cuenta con el proveedor." },
    { q: "C√≥digo de error 9", a: "Problema de inicio de sesi√≥n. Verifica que el correo y clave del panel sean los actuales. No uses contrase√±as guardadas antiguas." },
    { q: "C√≥digo de error 11", a: "Contenido no disponible. El t√≠tulo no est√° en tu regi√≥n o usas una IP que Disney bloquea. No uses VPN ni Proxy." },
    { q: "C√≥digo de error 13", a: "L√≠mite de dispositivos alcanzado. Seg√∫n el Punto 2 de nuestros TyC, solo puedes usar las pantallas adquiridas. Cierra sesi√≥n en otros equipos." },
    { q: "C√≥digo de error 14", a: "Correo o contrase√±a incorrectos. Revisa los datos en este panel. Recuerda que las claves suelen tener may√∫sculas." },
    { q: "C√≥digo de error 21", a: "Error de conexi√≥n. Tu dispositivo no alcanza los servidores. Reinicia tu m√≥dem y verifica tu se√±al WiFi." },
    { q: "C√≥digo de error 22", a: "Restricci√≥n de edad. El perfil tiene filtro infantil. Usa el PIN **0000** en ajustes de perfil para subir la clasificaci√≥n a 18+." },
    { q: "C√≥digo de error 24", a: "Error de red/carga. Tu internet es inestable. Aseg√∫rate de tener al menos 5 Mbps de velocidad estable." },
    { q: "C√≥digo de error 25", a: "Error interno de Disney. Es un fallo general de la plataforma. Espera unos minutos e intenta de nuevo." },
    { q: "C√≥digo de error 30", a: "Problema de registro del dispositivo. Disney no reconoce tu equipo. Intenta desinstalar y reinstalar la aplicaci√≥n." },
    { q: "C√≥digo de error 31", a: "Error de ubicaci√≥n. La app no verifica d√≥nde est√°s. Activa el GPS/Ubicaci√≥n en tu dispositivo m√≥vil." },
    { q: "C√≥digo de error 32", a: "Error de inicio de sesi√≥n. La sesi√≥n expir√≥ o la clave cambi√≥. Revisa los datos vigentes en este panel de clientes." },
    { q: "C√≥digo de error 38", a: "Ajustes de hora. La hora de tu TV o m√≥vil no coincide con la real. Pon la 'Hora en autom√°tico' en los ajustes de tu equipo." },
    { q: "C√≥digo de error 39", a: "Derechos de autor / HDMI. El cable HDMI no es compatible o est√°s grabando pantalla. Cambia el cable o el puerto de tu televisor." },
    { q: "C√≥digo de error 41", a: "Error de reproducci√≥n. El servidor est√° saturado por un estreno. Intenta reproducir el video nuevamente." },
    { q: "C√≥digo de error 42", a: "Tiempo de espera agotado. Tu internet tard√≥ mucho en responder. Reinicia el router y acerca el dispositivo al WiFi." },
    { q: "C√≥digo de error 43", a: "Problema de enlace. Cierra la app y vuelve a entrar. Ocurre al dejar el contenido en pausa por mucho tiempo." },
    { q: "C√≥digo de error 73", a: "Error de ubicaci√≥n/VPN. Est√°s usando un VPN o tu IP es extranjera. Desactiva cualquier bloqueador para usar la app en Colombia." },
    { q: "C√≥digo de error 83", a: "Compatibilidad. El error m√°s com√∫n. Tu navegador o sistema de TV necesita actualizarse. Usa Google Chrome en PC." },
    { q: "C√≥digo de error 86", a: "Cuenta bloqueada. Esto pasa si se detecta actividad sospechosa o violaci√≥n de TyC. Contacta a soporte t√©cnico de inmediato." },
    { q: "C√≥digo de error 87", a: "Error de perfil. Los datos del perfil est√°n corruptos. Entra a otro perfil y regresa al tuyo para resetearlo." },
    { q: "C√≥digo de error 90", a: "Fallo de hardware. Tu dispositivo es antiguo y no soporta la seguridad de Disney. Prueba en otro equipo." },
    { q: "C√≥digo de error 1017", a: "Fallo de cach√© en Smart TV. Ve a ajustes de tu TV > Aplicaciones > Disney+ > Borrar cach√© y datos." },

    // --- SECCI√ìN ACCESO Y PERFILES (VINCULADO A TyC) ---
    { q: "Me pide PIN de 4 d√≠gitos", a: "El PIN est√°ndar es **0000**. Seg√∫n el Punto 3 de nuestros TyC, no debes modificar este PIN por ning√∫n motivo." },
    { q: "No me deja crear mi propio perfil", a: "Debes usar el perfil asignado. Crear o borrar perfiles viola el Punto 3 de los TyC y anula la garant√≠a." },
    { q: "Disney me pide un c√≥digo por correo", a: "Si te pide c√≥digo para entrar, escr√≠benos al WhatsApp. Nunca intentes cambiar el correo t√∫ mismo." },
    { q: "Por qu√© no puedo cambiar la foto de perfil?", a: "Para mantener el orden y la identificaci√≥n de cada cliente en las cuentas compartidas." },
    { q: "Mi suscripci√≥n dice 'Vencida' en la app", a: "Si en este panel aparece ACTIVA, ignora la app. Si no te deja ver, rep√≥rtalo para actualizar el m√©todo de pago." }
],
        "PRIME VIDEO": [
    { q: "Registro de TV (C√≥digo de 6 letras)", a: "Abre la App en tu TV, dale a 'Registrar'. Env√≠a el c√≥digo que aparece al WhatsApp de soporte para vincularte." },
    { q: "C√≥digo de error 1007, 1022, 1053", a: "Problema de conectividad. Tu red est√° bloqueando el tr√°fico de Amazon. Reinicia el m√≥dem y el equipo." },
    { q: "C√≥digo de error 7031", a: "Fallo de reproducci√≥n en PC. Tu navegador no soporta el formato. Usa Google Chrome actualizado." },
    { q: "C√≥digo de error 9074", a: "Error interno de la App. Ve a ajustes de tu Smart TV y selecciona 'Borrar datos' de la App Prime Video." },
    { q: "Puedo comprar o alquilar pel√≠culas?", a: "TERMINANTEMENTE PROHIBIDO (TyC Punto 1). Si realizas un cobro a la cuenta, el servicio se cancela sin reembolso." },
    { q: "Me pide PIN de compra", a: "Es una seguridad nuestra para evitar cobros extra. Solo puedes ver el contenido que diga 'Incluido con Prime'." },
    { q: "Error de 'Contenido Geobloqueado'", a: "Amazon es muy estricto con la regi√≥n. No uses VPN y aseg√∫rate de que tu cuenta de Amazon est√© en la regi√≥n local." },
    { q: "Error 5004 (Error de cuenta)", a: "Hay un problema con el inicio de sesi√≥n. Revisa que no haya espacios en el correo o clave proporcionados." },
    { q: "Error 2063 (Fallo de pago)", a: "Amazon detect√≥ un fallo en el m√©todo de pago. Av√≠sanos por WhatsApp para que el administrador lo solucione." },
    { q: "Por qu√© aparecen perfiles desconocidos?", a: "Es una cuenta compartida. Seg√∫n el Punto 3 de los TyC, solo usa tu perfil y no toques los dem√°s." },
    { q: "Puedo cambiar el nombre de mi perfil?", a: "No. Los nombres ayudan a identificar a cada cliente. Si lo cambias, violas los t√©rminos de uso." },
    { q: "Error de 'L√≠mite de dispositivos'", a: "Amazon permite pocas pantallas simult√°neas. Aseg√∫rate de cerrar la App si no la est√°s usando." },
    { q: "No encuentro el idioma Espa√±ol", a: "En el men√∫ de reproducci√≥n (icono de globo), selecciona Espa√±ol. Algunos t√≠tulos antiguos solo est√°n en ingl√©s." },
    { q: "C√≥mo quito los subt√≠tulos?", a: "Dentro del video, ve a 'Subt√≠tulos' y selecciona 'Desactivar'. Esto no afecta a los otros perfiles." },
    { q: "La calidad de video es baja", a: "Prime Video consume mucho internet. Necesitas al menos 15 Mbps estables para ver en 4K/UHD." },
    { q: "Error 8020 (Fallo de descarga)", a: "Ocurre si el almacenamiento de tu celular est√° lleno o si hay mala se√±al WiFi." },
    { q: "Aparece 'Suscripci√≥n finalizada'", a: "Ignora el mensaje si en este panel sale ACTIVA. Si no te deja reproducir, rep√≥rtalo para renovaci√≥n." },
    { q: "Puedo ver canales premium (HBO, Paramount) dentro de Prime?", a: "No. Solo est√° incluido el cat√°logo base de Amazon Prime. Otros canales tienen costo adicional." },
    { q: "Error de 'Dispositivo no compatible'", a: "Tu equipo no soporta el est√°ndar de encriptaci√≥n de Amazon. Intenta actualizar el sistema operativo." },
    { q: "C√≥mo contacto a un t√©cnico?", a: "Si ninguno de estos pasos sirve, usa el bot√≥n de Salir e ingresa al link de WhatsApp de MultiEntretenimiento BC." }
],
        "MAX / HBO": [
    { q: "Error 100 / 420", a: "Problema de conexi√≥n. Reinicia tu dispositivo y el m√≥dem. Si persiste, verifica que tu internet no tenga bloqueos de firewall." },
    { q: "Error 321 / 450", a: "Fallo de autenticaci√≥n. Revisa que los datos del panel coincidan. Intenta cerrar sesi√≥n y volver a entrar." },
    { q: "Error de 'Suscripci√≥n Expirada'", a: "Es un error de cach√© de la App. Borra los datos de la aplicaci√≥n en los ajustes de tu TV y vuelve a loguearte." },
    { q: "Error 0-00-000", a: "Fallo t√©cnico general de los servidores de Max. Debes esperar de 10 a 15 minutos a que restablezcan el servicio." },
    { q: "Error de 'No se puede reproducir el t√≠tulo'", a: "Ocurre si el navegador no est√° actualizado. Usa Microsoft Edge o la App oficial de Max para Windows." },
    { q: "Error: 'Demasiados dispositivos'", a: "Est√°s excediendo el l√≠mite de pantallas. Seg√∫n el Punto 2 de los TyC, solo usa las que adquiriste." },
    { q: "Max no est√° disponible en mi pa√≠s", a: "Ocurre si usas VPN. Max detecta tu IP y te bloquea. Desactiva cualquier programa de cambio de ubicaci√≥n." },
    { q: "Error 135 (Problema de video)", a: "Fallo en la tasa de refresco de tu TV. Ve a los ajustes de imagen de tu televisor y pon el modo est√°ndar." },
    { q: "Error 905 (Fallo en la App)", a: "La aplicaci√≥n de Max est√° desactualizada en tu PlayStore o App Store. Por favor actual√≠zala." },
    { q: "Error de 'Contenido Geobloqueado'", a: "Ciertos t√≠tulos solo est√°n disponibles en EE.UU. Si est√°s en Colombia, aseg√∫rate de no tener configurado el perfil en otro idioma." },
    { q: "Me pide crear un perfil nuevo", a: "PROHIBIDO (TyC Punto 3). Usa solo el perfil que te asignamos en el panel para evitar suspensiones." },
    { q: "Olvid√© el PIN de mi perfil de Max", a: "El PIN es fijo y no se modifica. Revisa la caja de datos de tu cuenta en este panel para recordarlo." },
    { q: "El audio se escucha pero la pantalla est√° negra", a: "Problema de HDCP. Tu cable HDMI no es compatible con el est√°ndar de Max. Cambia el puerto HDMI de tu TV." },
    { q: "Error en perfiles de ni√±os", a: "Si entraste a un perfil Kids y no puedes salir, cierra sesi√≥n y vuelve a entrar con los datos del panel." },
    { q: "No aparecen los subt√≠tulos en espa√±ol", a: "Durante la reproducci√≥n, dale al icono de idioma y selecciona 'Espa√±ol Latino'. No cambies el idioma general de la cuenta." },
    { q: "La App se cierra sola en Smart TV", a: "Falta de memoria en tu TV. Desinstala aplicaciones que no uses para liberar espacio." },
    { q: "Error 'Algo sali√≥ mal'", a: "Fallo gen√©rico. Suele arreglarse desconectando el televisor de la corriente por 30 segundos." },
    { q: "Puedo descargar contenido?", a: "Solo en dispositivos m√≥viles y tablets. Recuerda que las descargas ocupan espacio del plan general." },
    { q: "C√≥mo renovar mi cuenta Max?", a: "Escr√≠benos 24 horas antes del vencimiento al WhatsApp para mantener tu mismo perfil." },
    { q: "Por qu√© mi perfil tiene un PIN?", a: "Es por seguridad y privacidad entre clientes. No intentes quitarlo ni cambiarlo (TyC Punto 3)." }
]
    };

    let platFaqSeleccionada = "";

    function setTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
        localStorage.setItem('theme', theme);
        document.getElementById('themeBtn').innerText = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
    }

    function toggleTheme() {
        const currentTheme = localStorage.getItem('theme') === 'dark' ? 'light' : 'dark';
        setTheme(currentTheme);
    }
    const savedTheme = localStorage.getItem('theme') || 'light';
    setTheme(savedTheme);

    const firebaseConfig = { 
        apiKey: "AIzaSyBZKmJQ7TcszQeBu--3jK4sxA3F3tAF_N8", 
        authDomain: "panel-cuentas-clientes.firebaseapp.com", 
        projectId: "panel-cuentas-clientes" 
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const linkNetflix = "https://multibc2025.github.io/codigosNT-bc/"; 
    const linkDisney = "https://onlinealarmkur.com/date/es/#count-days";

    function cerrarModal() { document.getElementById("customModal").style.display = "none"; }
    function abrirModal(html) {
        document.getElementById("modalBody").innerHTML = html;
        document.getElementById("customModal").style.display = "flex";
    }

    function verTerminos() {
        abrirModal(`
            <div class="text-start">
                <h3 class="text-center mb-4">üìÑ T√©rminos y Condiciones</h3>
                <div style="font-size: 0.9rem; line-height: 1.6;">
                    <p><b>1. Integridad:</b> Prohibido modificar correos, claves o configuraciones de la cuenta.</p>
                    <p><b>2. Dispositivos:</b> Uso limitado estrictamente a las pantallas adquiridas.</p>
                    <p><b>3. Perfiles:</b> No crear, borrar ni cambiar nombres/fotos. El PIN es fijo.</p>
                    <p><b>4. Privacidad:</b> Prohibido compartir la cuenta con terceros.</p>
                    <p><b>5. Garant√≠a:</b> No hay reembolsos. Solo garant√≠a de reemplazo ante fallas.</p>
                    <hr>
                    <div class="p-3 bg-danger bg-opacity-10 border border-danger rounded">
                        <small class="text-danger d-block fw-bold">‚ö†Ô∏è AVISO DE CANCELACI√ìN:</small>
                        <small class="text-muted">Violar estas reglas anula la garant√≠a y el servicio se cancelar√° de inmediato sin devoluci√≥n de dinero. </small>
                    </div>
                </div>
            </div>
        `);
    }

    function verFAQ() {
        let botones = Object.keys(soporteData).map(p => 
            `<button class="btn btn-sm btn-outline-primary m-1" onclick="activarSoportePlataforma('${p}')">${p}</button>`
        ).join('');

        const html = `
            <h3>‚ùì Centro de Soporte</h3>
            <p class="text-muted">Selecciona el servicio que presenta problemas:</p>
            <div class="mb-3 d-flex flex-wrap justify-content-center">${botones}</div>
            <div id="areaFaq" style="display:none;">
                <input type="text" id="busquedaFaq" class="form-control mb-3" placeholder="Escribe tu duda..." onkeyup="filtrarContenidoFaq()">
                <div id="resultadosFaq"></div>
            </div>
        `;
        abrirModal(html);
    }

    function activarSoportePlataforma(p) {
        platFaqSeleccionada = p;
        document.getElementById("areaFaq").style.display = "block";
        filtrarContenidoFaq();
    }

    function filtrarContenidoFaq() {
        const query = document.getElementById("busquedaFaq").value.toLowerCase();
        const resultadosDiv = document.getElementById("resultadosFaq");
        const items = soporteData[platFaqSeleccionada];
        let html = `<h6 class="text-primary">Soluciones para ${platFaqSeleccionada}:</h6>`;
        const filtrados = items.filter(i => i.q.toLowerCase().includes(query) || i.a.toLowerCase().includes(query));
        filtrados.forEach(i => {
            html += `<div class="resultado-item mb-2"><b>¬ø${i.q}?</b><br><span class="text-muted small">${i.a}</span></div>`;
        });
        resultadosDiv.innerHTML = html;
    }

    function formatearDiasTexto(diff) {
        if (diff > 5) return "Vence en " + diff + "d";
        if (diff > 0 && diff <= 5) return "Pr√≥ximo a vencer (" + diff + "d)";
        if (diff === 0) return "Vence Hoy";
        if (diff === -1) return "Venci√≥ Ayer";
        if (diff < -1) return "Venci√≥ hace " + Math.abs(diff) + "d";
        return diff + "d";
    }

    async function verificarAcceso() {
        const tel = document.getElementById("inputTel").value.trim();
        if(!tel) return alert("Ingresa tu n√∫mero.");
        const btn = document.getElementById("btnAcceder");
        btn.disabled = true; btn.innerText = "Buscando...";

        try {
            const snapClientes = await db.collection("clientes").get();
            let clienteEncontrado = null;
            snapClientes.forEach(doc => {
                const c = doc.data();
                const numBD = (c.whatsapp || "").replace(/\D/g, '');
                if(numBD.includes(tel) && tel.length >= 7) clienteEncontrado = { id: doc.id, ...c };
            });

            if(clienteEncontrado) cargarPanelCliente(clienteEncontrado);
            else { alert("No registrado."); btn.disabled = false; btn.innerText = "Consultar"; }
        } catch (e) { alert("Error"); btn.disabled = false; }
    }

    async function cargarPanelCliente(cliente) {
        const hoyLocal = new Date();
        const hora = hoyLocal.getHours();
        hoyLocal.setHours(0,0,0,0);
        let momentoDia = hora < 12 ? "Buenos d√≠as" : (hora < 18 ? "Buenas tardes" : "Buenas noches");

        document.getElementById("sectionLogin").style.display = "none";
        document.getElementById("sectionPanel").style.display = "block";

        try {
            const snapCuentas = await db.collection("cuentas").where("clienteId", "==", cliente.id).get();
            let servicios = [];
            snapCuentas.forEach(doc => {
                const d = doc.data();
                const fVenceObj = new Date(d.fin + "T12:00:00");
                const diff = Math.ceil((fVenceObj - hoyLocal) / (1000 * 60 * 60 * 24)) - 1;
                if (diff >= -20) servicios.push({ ...d, diff });
            });

            const pagosOrd = [...servicios].sort((a, b) => new Date(b.inicio) - new Date(a.inicio)).slice(0, 2);
            let htmlPagos = "";
            pagosOrd.forEach((s, idx) => {
                htmlPagos += `<div class="px-3 border-start text-center">
                <small class="text-muted d-block" style="font-size: 0.6rem;">${idx==0?'√öLTIMO':'PEN√öLTIMO'} PAGO</small>
                <span class="fw-bold text-success" style="font-size: 0.9rem;">$${s.valor || 0}</span>
              </div>`;
            });

            document.getElementById("panelHeader").innerHTML = `
                <div class="d-flex justify-content-between align-items-center flex-wrap mb-3">
                    <h4 class="mb-0">¬°${momentoDia}, ${cliente.nombre}! üëã</h4>
                    <div class="d-flex align-items-center mt-2 mt-md-0">
                        
                        <button onclick="verTerminos()" class="btn btn-sm btn-outline-secondary ms-2">üìÑ T√©rminos</button>
                         <button onclick="verFAQ()" class="btn btn-sm btn-outline-info ms-2">‚ùì FAQ</button>
                        <button onclick="location.reload()" class="btn btn-outline-danger btn-sm fw-bold ms-3">Salir</button>
                    </div>
                </div>
                <hr>
                <div class="mb-4 text-center text-md-start">
                    <h2 class="fw-bold mb-0">Estado de tus suscripciones</h2>
                    <p class="text-muted">Gestiona tus cuentas y vencimientos</p>
                </div>
                <div class="banner-largo"><p class="mb-0 fw-bold">üöÄ PUBLICIDAD: ¬°RENUEVA A TIEMPO Y OBT√âN GRANDES DESCUENTOS! üöÄ</p></div>`;

            const generarHTML = (s) => {
                const fV = s.fin.split('-').reverse().join('/');
                const ahoraMomento = new Date();
                
                // 1. RESTAURACI√ìN DE BOTONES DE AUTOGESTI√ìN
                const pName = s.plataforma.toUpperCase();
                let btnLink = "";
                if(s.diff >= 0) {
                    if(pName.includes("NETFLIX")) btnLink = `<a href="${linkNetflix}" target="_blank" class="btn-autogestion">Autogesti√≥n</a>`;
                    else if(pName.includes("DISNEY")) btnLink = `<a href="${linkDisney}" target="_blank" class="btn-autogestion">Autogesti√≥n</a>`;
                }

                // 2. L√ìGICA DE FECHAS PARA LA OFERTA
                const fechaHoyText = ahoraMomento.toLocaleDateString('es-ES', { day: '2-digit', month: 'long' });
                const ma√±ana = new Date();
                ma√±ana.setDate(ahoraMomento.getDate() + 1);
                const fechaMa√±anaText = ma√±ana.toLocaleDateString('es-ES', { day: '2-digit', month: 'long' });

                let textoEstado = "";
                let palabraFinaliza = "";
                if (s.diff > 0) {
                    textoEstado = "est√° pr√≥ximo a vencer (falta(n) *" + s.diff + "* d√≠a(s))";
                    palabraFinaliza = "finaliza";
                } else if (s.diff === 0) {
                    textoEstado = "*VENCE HOY mismo*";
                    palabraFinaliza = "finaliza";
                } else {
                    textoEstado = "ya se encuentra *VENCIDO* (hace " + Math.abs(s.diff) + " d√≠as)";
                    palabraFinaliza = "finaliz√≥";
                }

                const aplicaOferta = (s.diff === 0 || s.diff === 1);
                let avisoOferta = "";
                let textoOfertaWA = "";
                if (aplicaOferta) {
                    const diaDeLaOferta = s.diff === 0 ? fechaHoyText : fechaMa√±anaText;
                    avisoOferta = `<div class="oferta-renovacion">üî• <b>¬°PROMOCI√ìN ESPECIAL!</b> üî•<br>Renueva hoy <b>${diaDeLaOferta}</b> y recibe un <b>DESCUENTO</b>.<br><small>*Aplica en soporte*</small></div>`;
                    textoOfertaWA = `üéÅ *Deseo aplicar al descuento especial por renovaci√≥n el d√≠a ${diaDeLaOferta}*.\n\n`;
                }

                let cuerpoTxt = "Hola *_MultiEntretenimiento BC_* (Ã∂‚óâÕõ‚Äø‚óâÃ∂), ¬øC√≥mo est√°n?.\n\n" +
                                "Quiero informar que mi servicio de *" + s.plataforma.toUpperCase() + "* " + textoEstado + "\n" +
                                "ÏõÉ El d√≠a *" + fV + "* " + palabraFinaliza + " mi suscripci√≥n. \n\n" +
                                "‚úç(‚óî‚ó°‚óî) *DATOS DE MI CUENTA:* \n" +
                                "üìß *Correo:* " + s.correo + "\n" +
                                "üë§ *Perfil:* " + s.perfil + "\n" +
                                "üë§ *Cliente:* " + cliente.nombre + "\n\n" +
                                "Deseo realizar el proceso de renovaci√≥n un nuevo mes.\n" +
                                textoOfertaWA +
                                "Quedo a la espera de su respuesta para proceder con el pago.\n\n";

                const msjWA = encodeURIComponent(cuerpoTxt);
                
                // --- L√ìGICA √öLTIMA FECHA DE MODIFICACI√ìN (SOLO VERDES Y AMARILLOS) ---
                let htmlModificacion = "";
                if (s.diff >= 0) {
                    let txtMod = s.ultimaModificacion ? new Date(s.ultimaModificacion).toLocaleString('es-ES', { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit', hour12: true }) : "No ha habido modificaci√≥n";
                    htmlModificacion = `<div style="font-size: 0.75rem; color: var(--text-muted); text-align: center; margin-bottom: 8px; font-style: italic;">√öltima modificaci√≥n: ${txtMod}</div>`;
                }
                
                let htmlNotas = "";
                if (s.nota_cuenta && s.nota_cuenta !== "") {
                        htmlNotas = `
                        <div style="background-color: #fff3cd; color: #856404; padding: 10px; border-radius: 6px; font-size: 0.8rem; border-left: 4px solid #ffc107; margin-top: 10px; text-align: left;">
                            <b style="color: #bc9105;">üìå NOTA DE SOPORTE:</b><br>
                            ${s.nota_cuenta}
                        </div>`;
                    }
                // Bot√≥n de WhatsApp
                let btnWA = s.diff <= 5 ? `
                    <div class="mt-3">
                        ${htmlModificacion}
                        <a href="https://wa.me/573503938788?text=${msjWA}" target="_blank" class="btn btn-success w-100 fw-bold" style="background-color: #25d366; border: none;">RENOVAR POR WHATSAPP</a>
                        ${avisoOferta}
                    </div>` : `<div class="mt-3">${htmlModificacion}</div>`;

                const badgeColor = s.diff < 0 ? "bg-danger" : (s.diff <= 5 ? "bg-warning text-dark" : "bg-success");
                const colorClase = s.diff < 0 ? "vencido" : (s.diff <= 5 ? "proximo" : "activo");

                return `
                <div class="card servicio-card shadow-sm ${colorClase} mb-3">
                    <div class="card-body p-3">
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <h5 class="mb-0 text-uppercase"><b>${s.plataforma}</b> ${btnLink}</h5>
                            <span class="badge badge-status ${badgeColor}">${formatearDiasTexto(s.diff)}</span>
                        </div>
                        <div class="row text-center mb-2" style="font-size: 0.8rem;">
                            <div class="col-6 border-end">INICIO: <b>${s.inicio.split('-').reverse().join('/')}</b></div>
                            <div class="col-6">FIN: <b>${fV}</b></div>
                        </div>
                        <div class="info-row" style="font-size: 0.85rem;">
                            <p class="mb-1">üìß <b>Correo:</b> ${s.correo}</p>
                            <p class="mb-0">üîë <b>Clave:</b> ${s.diff < 0 ? '********' : s.clave}</p>
                            <p class="mb-1">üë§ <b>Perfil:</b> ${s.perfil} | <b>PIN:</b> <span class="pin-box">${s.pin}</span></p>
                        ${htmlNotas}</div>
                        ${btnWA}
                    </div>
                </div>`;
            };

            const vigentes = servicios.filter(s => s.diff > 5).sort((a,b) => b.diff - a.diff);
            const proximos = servicios.filter(s => s.diff >= 0 && s.diff <= 5).sort((a,b) => a.diff - b.diff);
            const vencidos = servicios.filter(s => s.diff < 0).sort((a,b) => b.diff - a.diff);

            const colD = document.createElement("div"); colD.className = "col-lg-6 order-mobile-1";
            const colI = document.createElement("div"); colI.className = "col-lg-6 order-mobile-2";

            colD.innerHTML = "<h6 class='column-title'>‚úÖ SERVICIOS ACTIVOS</h6>" + vigentes.map(generarHTML).join('') + "<div class='mini-banner'>Publicidad Activos</div>";
            colI.innerHTML = "<h6 class='column-title'>‚ö†Ô∏è PRIORIDAD / VENCIDOS</h6>" + proximos.map(generarHTML).join('') + vencidos.map(generarHTML).join('') + "<div class='mini-banner'>Publicidad Renovaciones</div>";

            const lista = document.getElementById("listaServicios");
            lista.innerHTML = "";
            lista.appendChild(colD);
            lista.appendChild(colI);
            
            // NUEVO: Hace aparecer el footer solo cuando ya todo est√° cargado
    document.querySelector(".main-footer").classList.add("footer-visible");

        } catch (e) { console.error(e); }
    }
    
    
</script>

<footer class="main-footer">
    <p>
        &copy; <span id="year"></span> <strong>MultiEntretenimiento BC</strong> 
        <span style="margin-left: 8px; border-left: 1px solid #ccc; padding-left: 8px;">Todos los derechos reservados</span>
    </p>
</footer>

<script>
    // Se asegura de poner el a√±o actual
    document.getElementById("year").textContent = new Date().getFullYear();
</script>
</body>
</html>
