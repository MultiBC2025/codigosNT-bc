<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Buscador de Correos RSS</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    .loader {
      display: none;
      text-align: center;
      font-size: 20px;
      color: #4CAF50;
    }
    .error-message {
      color: red;
      font-size: 16px;
    }
  </style>
</head>
<body>

  <h1>Buscador de Correos</h1>
  <input type="text" id="searchInput" placeholder="Escribe el correo a buscar">
  <button onclick="searchEmails()">Buscar</button>

  <div id="loader" class="loader">Buscando correos...</div>
  <div id="errorMessage" class="error-message"></div>
  <div id="emailResults"></div>

  <script>
    const feeds = {
      'mayornetsa': 'https://yopmail.com/rss?login=mayornetsa&h=3741e98f272043bb890d8f09fb6a3ada',
      'otrocorreo1': 'https://yopmail.com/rss?login=otrocorreo1&h=1234abcd5678efgh',
      'otrocorreo2': 'https://yopmail.com/rss?login=otrocorreo2&h=abcdef1234567890'
      // Agrega aquí más RSS feeds según sea necesario
    };

    function searchEmails() {
      const searchTerm = document.getElementById("searchInput").value.trim();
      const emailResultsDiv = document.getElementById("emailResults");
      const loaderDiv = document.getElementById("loader");
      const errorMessageDiv = document.getElementById("errorMessage");

      emailResultsDiv.innerHTML = ''; // Limpiar resultados anteriores
      loaderDiv.style.display = 'block'; // Mostrar el cargador
      errorMessageDiv.innerHTML = ''; // Limpiar mensaje de error

      if (!feeds[searchTerm]) {
        loaderDiv.style.display = 'none'; // Ocultar cargador
        errorMessageDiv.innerHTML = 'Correo no encontrado. Intenta con otro correo.';
        return;
      }

      const url = feeds[searchTerm];
      const proxyUrl = 'https://cors-anywhere.herokuapp.com/'; // Usamos un proxy CORS
      const finalUrl = proxyUrl + url; // Concatenamos la URL con el proxy

      fetch(finalUrl)
        .then(response => response.text())
        .then(data => {
          const parser = new DOMParser();
          const xmlDoc = parser.parseFromString(data, "text/xml");

          const items = xmlDoc.getElementsByTagName("item");
          if (items.length === 0) {
            loaderDiv.style.display = 'none';
            errorMessageDiv.innerHTML = 'No se encontraron correos para este correo electrónico.';
            return;
          }

          // Mostrar los resultados
          emailResultsDiv.innerHTML = `<h3>Resultados para "${searchTerm}"</h3>`;
          Array.from(items).forEach(item => {
            const title = item.getElementsByTagName("title")[0].textContent;
            const link = item.getElementsByTagName("link")[0].textContent;
            const pubDate = item.getElementsByTagName("pubDate")[0].textContent;

            emailResultsDiv.innerHTML += `
              <div>
                <h4>${title}</h4>
                <p><strong>Fecha:</strong> ${pubDate}</p>
                <a href="${link}" target="_blank">Leer correo completo</a>
              </div>
              <hr>
            `;
          });

          loaderDiv.style.display = 'none'; // Ocultar el cargador
        })
        .catch(error => {
          console.error('Error al cargar los correos:', error);
          loaderDiv.style.display = 'none'; // Ocultar el cargador
          errorMessageDiv.innerHTML = 'Hubo un error al intentar obtener los correos. Intenta nuevamente más tarde.';
        });
    }
  </script>

</body>
</html>
