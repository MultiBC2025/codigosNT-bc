<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Bandeja de Entrada de Yopmail</title>
</head>
<body>
    <h1>Correos Recientes de Yopmail</h1>
    <div id="rss-feed"></div>

    <!-- Aquí se mostrará el iframe cuando el usuario haga clic en un correo -->
    <div id="correo-detalle" style="display:none;">
        <iframe id="correo-frame" width="100%" height="500px"></iframe>
    </div>

    <script>
        const rssUrl = 'https://yopmail.com/rss?login=mayornetsa&h=3741e98f272043bb890d8f09fb6a3ada';

        async function fetchRSS() {
            try {
                const proxyUrl = 'https://api.allorigins.win/get?url=';
                const response = await fetch(proxyUrl + encodeURIComponent(rssUrl));
                const data = await response.json();
                const rssData = new DOMParser().parseFromString(data.contents, 'application/xml');

                const items = rssData.querySelectorAll('item');
                let html = '<ul>';

                items.forEach(item => {
                    const title = item.querySelector('title').textContent;
                    const link = item.querySelector('link').textContent;
                    const description = item.querySelector('description').textContent;

                    html += `
                        <li>
                            <strong><a href="javascript:void(0);" onclick="verCorreo('${link}')">${title}</a></strong><br>
                            <p>${description}</p>
                        </li>
                    `;
                });

                html += '</ul>';
                document.getElementById('rss-feed').innerHTML = html;

            } catch (error) {
                console.error('Error al obtener el RSS:', error);
            }
        }

        // Función para mostrar el correo en un iframe
        function verCorreo(link) {
            document.getElementById('rss-feed').style.display = 'none';
            document.getElementById('correo-detalle').style.display = 'block';
            document.getElementById('correo-frame').src = link;
        }

        fetchRSS();
    </script>
</body>
</html>
